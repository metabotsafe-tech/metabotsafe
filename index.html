<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MetaBotSafe ‚Äî Achat test</title>

  <!-- SEO & international -->
  <link rel="alternate" hreflang="fr" href="https://metabotsafe.vercel.app/" />
  <link rel="alternate" hreflang="en-us" href="https://metabotsafe.vercel.app/" />
  <link rel="alternate" hreflang="en-gb" href="https://metabotsafe.vercel.app/" />
  <link rel="alternate" hreflang="es" href="https://metabotsafe.vercel.app/" />
  <link rel="alternate" hreflang="de" href="https://metabotsafe.vercel.app/" />
  <link rel="alternate" hreflang="it" href="https://metabotsafe.vercel.app/" />
  <link rel="alternate" hreflang="pt" href="https://metabotsafe.vercel.app/" />
  <meta name="description" content="Achetez des bots de trading fiables et performants pour le forex et les prop firms. Test Stripe 1‚Ç¨, acc√®s imm√©diat." />
  <meta name="keywords" content="bot de trading, robot forex, achat bot, trading bot, comprar robot trading, buy trading bot" />

  <style>
    :root {
      --bg: #0a1320;
      --card: #0f1b2e;
      --text: #e8f1ff;
      --muted: #a9b7d0;
      --accent: #43d39e;
      --primary: #4ea1ff;
      --danger: #ff6b6b;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -10%, #12243e, transparent),
                  radial-gradient(1200px 600px at 100% 10%, #071325, transparent),
                  var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    header {
      padding: 24px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo { font-weight: 700; letter-spacing: 0.3px; }
    .container {
      max-width: 980px;
      margin: 0 auto;
      padding: 24px 20px 120px;
    }
    .hero {
      background: linear-gradient(180deg, rgba(78,161,255,0.08), rgba(67,211,158,0.08));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      padding: 28px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }
    h1 { margin: 0 0 10px; font-size: 28px; }
    p.lead { margin: 0; color: var(--muted); }
    .pay-card {
      margin-top: 22px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      padding: 18px;
      display: grid;
      grid-template-columns: 1fr 220px;
      gap: 14px;
    }
    .field { display: grid; gap: 8px; }
    label { font-size: 14px; color: var(--muted); }
    input[type="email"] {
      width: 100%;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      outline: none;
    }
    .price {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      background: rgba(78,161,255,0.06);
      border: 1px dashed rgba(255,255,255,0.15);
      border-radius: 14px;
      padding: 12px;
      text-align: center;
      min-height: 72px;
    }
    .price strong { font-size: 22px; }
    .fixed-pay {
      position: fixed;
      right: 18px;
      bottom: 18px;
      display: flex;
      gap: 10px;
      align-items: center;
      background: linear-gradient(135deg, #4ea1ff, #43d39e);
      color: #071325;
      font-weight: 700;
      padding: 12px 16px;
      border-radius: 999px;
      box-shadow: 0 10px 22px rgba(0,0,0,0.35);
      cursor: pointer;
      border: none;
    }
    .fixed-pay:disabled {
      filter: grayscale(0.4);
      opacity: 0.7;
      cursor: not-allowed;
    }
    .status {
      margin-top: 12px;
      font-size: 14px;
      color: var(--muted);
      min-height: 20px;
    }
    .translate-wrap {
      position: fixed;
      left: 10px;
      bottom: 12px;
      z-index: 10;
      background: rgba(15,27,46,0.7);
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.08);
    }
    .small {
      font-size: 12px; color: var(--muted);
    }
    @media (max-width: 700px) {
      .pay-card { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">MetaBotSafe</div>
    <div class="small">Paiement test 1 ‚Ç¨</div>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Acc√©dez √† nos bots de trading</h1>
      <p class="lead">Processus de paiement s√©curis√© via Stripe ‚Äî e-mail requis pour l‚Äôenvoi des acc√®s.</p>

      <div class="pay-card">
        <div class="field">
          <label for="email">Adresse e-mail</label>
          <input id="email" type="email" placeholder="votre@email.com" autocomplete="email" />
          <div class="status" id="status"></div>
        </div>
        <div class="price">
          <div>Achat test</div>
          <strong>1,00 ‚Ç¨</strong>
          <div class="small">via Stripe Checkout</div>
        </div>
      </div>
    </section>
  </main>

  <!-- Bouton fix√© bas-droite -->
  <button id="pay-button" class="fixed-pay" title="Payer 1 ‚Ç¨">
    üí≥ Payer 1 ‚Ç¨
  </button>

  <!-- Google Translate widget -->
  <div class="translate-wrap">
    <div id="google_translate_element"></div>
  </div>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'fr', includedLanguages: 'en,fr,es,de,it,pt'}, 'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <!-- GoatCounter (statistiques invisibles) -->
  <script data-goatcounter="https://metabotsafe.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const btn = $("#pay-button");
    const statusEl = $("#status");
    const emailEl = $("#email");

    function setStatus(msg) {
      statusEl.textContent = msg || "";
    }

    btn.addEventListener("click", async () => {
      const email = (emailEl.value || "").trim();
      if (!email) {
        setStatus("‚ö†Ô∏è Merci d‚Äôentrer une adresse e-mail.");
        emailEl.focus();
        return;
      }

      btn.disabled = true;
      setStatus("Cr√©ation de la session Stripe‚Ä¶");

      try {
        const resp = await fetch("/api/create-checkout-session", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, price: 1 })
        });

        if (!resp.ok) {
          const txt = await resp.text();
          console.error("HTTP error:", resp.status, txt);
          setStatus("Erreur de cr√©ation de paiement. R√©essayez.");
          btn.disabled = false;
          return;
        }

        const data = await resp.json();
        if (data.url) {
          // Redirection directe vers Stripe Checkout
          window.location.href = data.url;
        } else if (data.id) {
          // Fallback si seulement un id est renvoy√© (peu probable avec notre endpoint)
          setStatus("Session cr√©√©e. Redirection Stripe‚Ä¶");
          window.location.href = `https://checkout.stripe.com/pay/${data.id}`;
        } else {
          setStatus("R√©ponse inattendue du serveur.");
          console.error("Unexpected:", data);
          btn.disabled = false;
        }
      } catch (err) {
        console.error(err);
        setStatus("Erreur r√©seau. V√©rifiez votre connexion puis r√©essayez.");
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
